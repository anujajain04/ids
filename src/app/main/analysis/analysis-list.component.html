<div [@routerTransition]>
    <div class="main-portlet">
        <div class="portlet light portlet-fit portlet-datatable bordered">
            <div class="portlet-title">
                <div class="caption">
                   Analysis List
                </div>

                <div class="row">
                    <div class="col-md-2"></div>
                    <ul class="nav nav-pills">
                        <li><a href="#"><label class="numsize"><label style="color:gray">56</label><small style="color:gray">Views</small></label></a></li>
                        <li><a href="#"><label class="numsize"><label style="color:gray">106</label><small style="color:gray">Views</small></label></a></li>
                        <li><a href="#"><label class="numsize"><label style="color:gray">73</label><small style="color:gray">Views</small></label></a></li>
                        <li><a href="#"><label class="numsize"><label style="color:gray">24</label><small style="color:gray">Views</small></label></a></li>
                        <li><a href="#"><label class="numsize"><label style="color:gray">13</label><small style="color:gray">Views</small></label></a></li>
                    </ul>
                </div>


            </div>
            <div class="divheader">
                <span style="padding-left: 30px;padding-right: 20px;">
                    <input [checked]="isAll()" (change)="selectAll($event)" type="checkbox" />
                </span>

                <div class="btn-group bootstrap-select bs-select form-control input-small" style="border-left: 1px solid gainsboro;margin-left:8px">
                    <button type="button" class="btn dropdown-toggle white" (click)="gotocreate()" data-toggle="dropdown" role="button" title="New datatset" style="width:90px">
                        <span class="filter-option pull-left"> Create New</span>
                        <!--<span class="bs-caret"><span class="caret"></span></span>-->
                    </button>
                    <!--<div class="dropdown-menu open" role="combobox">
                        <ul class="dropdown-menu inner" role="listbox" aria-expanded="false">
                            <li data-original-index="0" (click)="createDataset(i?.type)" *ngFor="let i of datatypes" class="selected" value="{{i?.type}}">
                                <a tabindex="0" class="" data-tokens="null" role="option" aria-disabled="false" aria-selected="true">
                                    <img [src]="i.getColorIcon()" border="0" alt="" class="smallmenuimg" /> {{i?.type}}

                                    <img [src]="createdataset(i?.type) ?i.getcoloricon():i.geticon()" border="0" alt="" class="smallmenuimg" /> {{i?.type}}
                                    <img class="imgwidth" [src]="datasetstage==i.getnumber()? i.getcoloricon():i.geticon()" border="0" alt="" />
                                </a>

                            </li>

                        </ul>
                    </div>-->

                </div>

                <span class="headspan" *ngIf="deleteAnalysis?.length > 0">
                    <button type="button" class="btn btn-default buttonheader" data-toggle="collapse" data-target="#copy" style="background-color: white;">
                        <span class="glyphicon glyphicon-duplicate"></span> Copy
                    </button>
                </span>
                <span class="headspan" *ngIf="deleteAnalysis?.length > 0">
                    <button type="button" class="btn btn-default buttonheader" data-toggle="collapse" data-target="#move" style="background-color: white;">
                        <span class="glyphicon glyphicon-log-out"></span> Move
                    </button>
                </span>
                <span class="headspan" *ngIf="deleteAnalysis?.length > 0">
                    <button type="button" data-toggle="collapse" data-target="#delete" class="btn btn-default buttonheader" style="background-color: white;">
                        <span class="glyphicon glyphicon-trash"></span> Delete
                    </button>
                </span>


                <span class="searchspan">

                    <input class="form-control" (keyup)="filter($event.target.value)" type="text" placeholder="Search...">

                </span>

            </div>
            <hr />

            <!--Delete Option-->
            <div id="delete" class="collapse out outcollapsecustm">

                <div class="row">
                    <div style="text-align:-webkit-center;"><b>Are You Sure You Want To Delete Datatset ?</b></div>
                </div>



                <div class="row">
                    <div class="col-sm-4">
                        <span class="input-group-btn" style="float: right" data-toggle="collapse" data-target="#delete">
                            <a href="javascript:;" class="btn green" id="username1_checker">
                                <i class="fa fa-times"></i> No
                            </a>
                        </span>
                    </div>
                    <div class="col-sm-4">
                        <span class="input-group-btn" (click)="yesdel()" data-toggle="collapse" data-target="#delete">
                            <a href="javascript:;" class="btn green" style="margin-left: 276px;" id="username1_checker">
                                <i class="fa fa-check"></i> Yes
                            </a>
                        </span>
                    </div>
                </div>


            </div>

            <!--Move Option-->

            <div id="move" class="collapse out outcollapsecustm">

                <div class="row" style="padding-top: 12px;">
                    <div class="col-md-4"><b>Move To Workspace :</b></div>
                    <div class="col-sm-4">
                        <select class="form-control" style="margin-left:13px">
                            <option>Workspace 1</option>
                        </select>
                    </div>
                </div>



                <div class="row">
                    <div class="col-sm-4">
                        <span class="input-group-btn" style="float: right" data-toggle="collapse" data-target="#move">
                            <a href="javascript:;" class="btn green" id="username1_checker">
                                <i class="fa fa-times"></i> No
                            </a>
                        </span>
                    </div>
                    <div class="col-sm-4">
                        <span class="input-group-btn" (click)="yes()" data-toggle="collapse" data-target="#move">
                            <a href="javascript:;" class="btn green" style="margin-left: 276px;" id="username1_checker">
                                <i class="fa fa-check"></i> Yes
                            </a>
                        </span>
                    </div>
                </div>


            </div>


            <!--Copy Option-->

            <div id="copy" class="collapse out outcollapsecustm">

                <div class="row" style="padding-top: 12px;">
                    <div class="col-md-4"><b>Copy To Workspace :</b></div>
                    <div class="col-sm-4">
                        <select class="form-control" style="margin-left:13px">
                            <option>Workspace 1</option>
                        </select>
                    </div>
                </div>



                <div class="row">
                    <div class="col-sm-4">
                        <span class="input-group-btn" style="float: right" data-toggle="collapse" data-target="#move">
                            <a href="javascript:;" class="btn green" id="username1_checker">
                                <i class="fa fa-times"></i> No
                            </a>
                        </span>
                    </div>
                    <div class="col-sm-4">
                        <span class="input-group-btn" (click)="yes()" data-toggle="collapse" data-target="#move">
                            <a href="javascript:;" class="btn green" style="margin-left: 276px;" id="username1_checker">
                                <i class="fa fa-check"></i> Yes
                            </a>
                        </span>
                    </div>
                </div>


            </div>





            <div class="listscorlbar" id="myGroup">
                <!--<div class="loader"></div>-->

                <div class="row" *ngFor="let i of filteranalysis; let sr=index">
                    <div class="portlet light portlet-fit portlet-datatable bordered col-sm-2 col-md-2 col-lg-2 divportletcustm">
                        <!--<input type="checkbox" [checked]="deleteanalysis.indexOf(i) !== -1" (change)="deletedata($event,i)" class="form-control" style="margin-top: 14px;height: 14px;" />-->
                        <input type="checkbox"  (change)="deletedata($event,i)"  class="form-control" style="margin-top: 14px;height: 14px;" />
                    </div>


                    <div class="portlet light portlet-fit portlet-datatable bordered col-md-10" style="margin-left: 0px;width: 90%;height:auto;box-shadow: 0px 1px 15px 2px rgba(0, 0, 0, 0.1);">

                        <div class="row">
                            <div class="col-sm-3" style="width:24%"> <label><b>{{i?.entityName}}</b> </label></div>


                            <div class="col-sm-6 ">{{i?.entityDescription}}</div>
                        </div>



                        <div class="divheader1">

                            <span class="headspan">
                                <button class="btn btn-default buttonheader2"><b style="font-size:10px">View Analysis </b></button>
                            </span>


                            <span class="headspan">
                                <button type="button" (click)="edit(i)" class="btn btn-default buttonheader2">
                                    <!--<img src="../../../assets/global/img/Explore Dataset.svg" class="listicon" /> -->
                                    <img src="../../../assets/global/img/edit.svg" class="listicon" /> &nbsp; <b style="font-size:10px">Edit</b>
                                </button>
                            </span>

                            <span class="headspan">
                                <button type="button" class="btn btn-default buttonheader2" (click)="gotoexplore(i)">
                                    <img src="../../../assets/global/img/Explore Dataset.svg" class="listicon" /> &nbsp; <b style="font-size:10px">Explore Dataset</b>
                                </button>
                            </span>
                            <span class="headspan">
                                <button type="button" class="btn btn-default buttonheader1" (click)="dashboard()">
                                    <img src="../../../assets/global/img/View Dashboard.svg" class="listicon" /> &nbsp; <b style="font-size:10px">View Dashboard</b>
                                </button>
                            </span>
                            <span class="headspan">
                                <button data-parent="#myGroup" type="button" data-toggle="collapse" [attr.data-target]="'#'+sr" class="btn btn-default buttonheader1" (click)="getHistory(i.entityKey,sr)">
                                    <img src="../../../assets/global/img/Dataset Details.svg" class="listicon" /> &nbsp; <b style="font-size:10px">Analysis Details</b>
                                </button>
                            </span>

                        </div>

                    </div>

                    <div id="{{sr}}" class="collapse out outcollapsecustm indent">

                        <div class="row">
                            <div class="col-md-5" style="margin-top: -20px;"><label class="lblcustm"><b>Dataset Name: </b>{{i?.analysisHistory.entityName}}</label></div>


                        </div>

                        <div class="row">
                            <div class="col-md-5" style="margin-top: -20px;"> <label class="lblcustm"><b>Created Date: </b>{{i?.analysisHistory.startDate}}</label></div>
                        </div>

                        <div class="row">
                            <div class="col-md-5" style="margin-top: -20px;"> <label class="lblcustm"><b>Modified Date: </b>{{i?.analysisHistory.endDate}}</label></div>


                        </div>
                        <div class="row">
                            <div class="col-md-5" style="margin-top: -20px;"> <label class="lblcustm"><b>Refersh Date: </b>{{i?.analysisHistory.runStatus}}</label></div>
                        </div>


                    </div>
                </div>


            </div>

            <div id="deleteModal" class="modal fade">
                <div class="modal-dialog">
                    <!-- Modal content-->
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" (click)="deleteClick(false)" data-dismiss="modal">&times;</button>
                            <h4 class="modal-title">Delete</h4>
                        </div>
                        <div class="modal-body">
                            <div class="form-horizontal" id='myForm'>
                                <div class="col-md-7">
                                    Are you sure to delete?
                                </div>

                            </div>
                        </div>
                        <div class="modal-footer">
                            <div style="float:right">
                                <button type="button" data-dismiss="modal" (click)="deleteClick(false)" class="btn btn-warning">Cancel</button>
                                <button type="button" data-dismiss="modal" (click)="deleteClick(true)" class="btn btn-danger">Delete</button>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
            <!--pagination-->
            <div class="container">
                <ul class="pagination" style="float:right" id="pager">
                    <li (click)="previous()"><a><i class="fa fa-angle-left fa-mid"></i></a></li>
                    <li *ngFor="let p of arr" (click)="changePage(p)" [ngClass]="currentPage==p?'active':'disable'"><a>{{p}}</a></li>
                    <li (click)="next()"><a><i class="fa fa-angle-right fa-mid"></i></a></li>
                </ul>
            </div>

        </div>
    </div>
</div>
